// Generated by CoffeeScript 1.7.1
(function() {
  window.LOG = function() {
    return typeof console !== "undefined" && console !== null ? typeof console.log === "function" ? console.log.apply(console, arguments) : void 0 : void 0;
  };

  window.init_common = function() {
    init_loading_button();
    return init_time();
  };

  window.init_loading_button = function() {
    return ($('body')).on('click', '.btn-loading', function() {
      return ($(this)).button('loading');
    });
  };

  window.init_time = function() {
    var recalculate;
    if (($('time')).length > 0) {
      recalculate = function() {
        ($('time[datetime]')).each(function() {
          var date, diff;
          date = moment.utc(($(this)).attr('datetime'));
          diff = moment().diff(date, 'days');
          if (diff > 25) {
            ($(this)).text(date.local().format('YYYY-MM-DD'));
          } else {
            ($(this)).text(date.fromNow());
          }
          return ($(this)).attr('title', date.local().format('dddd, MMMM Do YYYY, HH:mm:ss Z'));
        });
        return setTimeout(arguments.callee, 1000 * 45);
      };
      return recalculate();
    }
  };

  window.clear_notifications = function() {
    return ($('#notifications')).empty();
  };

  window.show_notification = function(message, category) {
    if (category == null) {
      category = 'warning';
    }
    clear_notifications();
    if (!message) {
      return;
    }
    return ($('#notifications')).append("<div class=\"alert alert-dismissable alert-" + category + "\">\n  <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">&times;</button>\n  " + message + "\n</div>");
  };

}).call(this);
